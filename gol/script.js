// Optimized version of https://github.com/SumiGovindaraju/sumigovindaraju.github.io/blob/master/gol/script-old.js using https://closure-compiler.appspot.com/home
for(var d,e,f=1,h=innerWidth,k=innerHeight,l=Math.floor(h/8),m=Math.floor(k/8),n=Array(l),p=!0,q=0;q<l;q++)n[q]=Array(m);window.addEventListener("load",function(){d=document.getElementById("can");d.width=h;d.height=k;e=d.getContext("2d");alert("Press any key to pause/play. Click on any cell to change change its status.");for(var b=0;b<l;b++)for(var a=0;a<m;a++)n[b][a]=.5<=Math.random()?!0:!1;r()});
function r(){if(p){for(var b=0;b<l;b++)for(var a=0;a<l;a++)e.fillStyle=n[b][a]?"#000000":"#ffffff",e.fillRect(8*b,8*a,8,8);b=Array(l);document.title="Generation: "+f;for(a=0;a<l;a++){b[a]=Array(m);for(var c=0;c<m;c++){var g=0;1<=a&&1<=c&&n[a-1][c-1]&&g++;1<=c&&n[a][c-1]&&g++;a<l-1&&1<=c&&n[a+1][c-1]&&g++;1<=a&&n[a-1][c]&&g++;a<l-1&&n[a+1][c]&&g++;1<=a&&c<m-1&&n[a-1][c+1]&&g++;c<m-1&&n[a][c+1]&&g++;a<l-1&&c<m-1&&n[a+1][c+1]&&g++;b[a][c]=3==g||n[a][c]&&2==g}}n=b;f++}requestAnimationFrame(r)}
window.addEventListener("keypress",function(){p=!p;console.log("Pressed Key")});window.addEventListener("click",function(b){n[Math.floor(l*b.clientX/h)][Math.floor(m*b.clientY/k)]=!n[Math.floor(l*b.clientX/h)][Math.floor(m*b.clientY/k)];e.fillStyle=n[Math.floor(l*b.clientX/h)][Math.floor(m*b.clientY/k)]?"#000000":"#ffffff";e.fillRect(8*Math.floor(l*b.clientX/h),8*Math.floor(m*b.clientY/k),8,8)});
